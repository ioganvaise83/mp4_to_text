# mp4_to_text

[![Repository](https://img.shields.io/badge/GitHub-Repository-blue)](https://github.com/ioganvaise83/mp4_to_text)
[![Docker Image](https://img.shields.io/badge/Docker-nosana%2Fwhisper%3Alatest-blue)](https://hub.docker.com/r/nosana/whisper)

Проект для преобразования видео в формате MP4 в текстовый формат с использованием технологии распознавания речи OpenAI Whisper.

## Описание

Приложение использует модель Whisper для автоматического распознавания речи в видеофайлах и конвертации аудиодорожки в текст. Поддерживает русский язык и генерирует субтитры в формате VTT.

## Особенности

- Автоматическое распознавание речи на русском языке
- Использование модели Whisper medium для баланса между качеством и скоростью
- Docker-контейнеризация для простоты развертывания
- Вывод в формате субтитров VTT
- Предварительная загрузка модели для ускорения работы

## Предварительные требования

- Docker и Docker Compose
- Видеофайлы в формате MP4

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/ioganvaise83/mp4_to_text.git
   cd mp4_to_text
   ```

2. Соберите Docker образ (опционально, если не хотите использовать готовый):
   ```bash
   docker build -t whisper-with-models .
   ```

## Использование

### Подготовка видео

Поместите ваши MP4 файлы в папку `media/`.

### Запуск обработки

Запустите обработку с помощью Docker Compose:

```bash
docker-compose up
```

По умолчанию обрабатывается файл `media/test_video.mp4` с выводом в `out/test_video.vtt`.

### Обработка других файлов

Для обработки другого файла отредактируйте `docker-compose.yaml`:

```yaml
command: [ "/путь/к/вашему/файлу.mp4", "--language", "Russian", "--model", "medium", "--output_dir", "/out" ]
```

### Параметры Whisper

- `--language Russian`: Указывает язык распознавания
- `--model medium`: Используемая модель (tiny, base, small, medium, large)
- `--output_dir /out`: Директория для выходных файлов

## Выходные форматы

Приложение генерирует файлы субтитров в формате VTT (WebVTT) с временными метками.

## Структура проекта

```
mp4_to_text/
├── Dockerfile              # Конфигурация Docker образа
├── docker-compose.yaml     # Конфигурация Docker Compose
├── media/                  # Папка для входных видеофайлов
│   └── test_video.mp4
├── models/                 # Папка для моделей (пустая, модели кэшируются в контейнере)
├── out/                    # Папка для выходных файлов
│   └── test_video.vtt
└── README.md               # Этот файл
```

## Примечания

- Docker образ `whisper-with-models` уже содержит в себе предзагруженные модели и не требует их скачивания каждый раз при перезапуске
- Для больших файлов рекомендуется использовать модель medium или large для лучшего качества
- Обработка видео зависит от длины файла и производительности системы

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности см. в файле [LICENSE](LICENSE).
